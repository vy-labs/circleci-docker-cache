description: >
  This command stores the cache to s3 if the cache is not already stored
parameters:
  aws_region:
    type: string
    description: "AWS region"
    default: "us-east-1"
  bucket_name:
    type: string
    description: "Bucket name"
  source:
    type: string
    description: "Cache key to restore"
  dir:
    type: string
    description: "Directory to restore cache to"
steps:
  - run:
      environment:
        BUCKET_NAME: <<parameters.bucket_name>>
        SOURCE: <<parameters.source>>
        DIR: <<parameters.dir>>
        AWS_REGION: <<parameters.aws_region>>
      name: Store s3 cache
      command: <<include(scripts/s3_cache/store.sh)>>
